@startuml
!include <c4/C4_Container>
LAYOUT_LANDSCAPE()

title C1 — Spare Parts for Everyone

Person(customer, "Покупатель", "Гость или авторизованный пользователь")
Person(admin, "Администратор", "Управляет каталогом, заказами, пользователями")
AddRelTag("backup", $lineStyle = DashedLine())

System(spareparts, "Spare Parts for Everyone", "Интернет-магазин автозапчастей")
System_Ext(auth, "Auth Service\n(Auth0 / Keycloak)", "Аутентификация и управление пользователями\n(выдача JWT)")
System_Ext(catalog, "Catalog Service\n()", "Справочник запчастей: артикул, цена, наличие")
System_Ext(payment, "Payment Service\n(ЮKassa / СБП)", "Онлайн-оплата: карты, СБП, кошельки")
System_Ext(delivery, "Delivery Service\n(СДЭК / Boxberry)", "Расчёт и отслеживание доставки")

Rel(customer, spareparts, "Просматривает каталог, добавляет в корзину, оформляет заказ", "HTTPS", $tags="backup")
Rel(admin, spareparts, "Управляет каталогом,заказами, пользователями", "HTTPS", $tags="backup")
Rel(spareparts, auth, "Валидация токена", "JWT", $tags="backup")
Rel(spareparts, catalog, "Получение данных о запчастях", "REST", $tags="backup")
Rel(spareparts, payment, "Инициация оплаты", "REST", $tags="backup")
Rel(spareparts, delivery, "Передача заказа на доставку", "REST", $tags="backup")

@enduml